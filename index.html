<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Astronomy Library Graph</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.css" rel="stylesheet">
  <style>
    body {
      background-color: #000000;
      color: #fff;
      font-family: 'Arial', sans-serif;
    }

    #connections-graph-container {
      position: relative;
      background-color: #000000;
      margin: 0 auto;
      width: 100%;
      padding: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    #connections-graph {
      height: 700px;
      width: 100%;
      border: 1px solid #333;
      border-radius: 8px;
      overflow: hidden;
    }

    .toggle-physics-button {
      background-color: #4a90e2;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 4px;
      font-size: 18px;
      margin: 0 auto;
      cursor: pointer;
      text-align: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 10px;
      z-index: 9999;
      transition: background-color 0.3s ease;
    }

    .toggle-physics-button:hover {
      background-color: #357abd;
    }

    .toggle-physics-button:active {
      transform: translateY(1px);
    }
  </style>
</head>
<body>

<div id="connections-graph-container">
  <button class="toggle-physics-button">Push button</button>
  <div id="connections-graph"></div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/vis/4.21.0/vis.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    const items = [
      { id: 1, title: "Isaac Newton", type: "Scientist", tags: ["Gravity", "Scientist"] },
      { id: 2, title: "Galileo Galilei", type: "Scientist", tags: ["Telescope", "Scientist"] },
      { id: 3, title: "Stephen Hawking", type: "Scientist", tags: ["Black Holes", "Scientist"] },
      { id: 4, title: "The Principia", type: "Book", tags: ["Gravity", "Book"] },
      { id: 5, title: "The Starry Messenger", type: "Book", tags: ["Telescope", "Book"] },
      { id: 6, title: "A Brief History of Time", type: "Book", tags: ["Black Holes", "Book"] },
      { id: 7, title: "Black Hole", type: "Astronomical Object", tags: ["Space", "Astronomical Object"] },
      { id: 8, title: "Star", type: "Astronomical Object", tags: ["Space", "Astronomical Object"] },
      { id: 9, title: "Supernova", type: "Astronomical Object", tags: ["Space", "Astronomical Object"] },
      { id: 10, title: "Galaxy", type: "Astronomical Object", tags: ["Space", "Astronomical Object"] },
      { id: 11, title: "Quantum Mechanics", type: "Concept", tags: ["Physics", "Concept"] },
      { id: 12, title: "Relativity", type: "Concept", tags: ["Physics", "Concept"] },
      { id: 13, title: "Big Bang", type: "Concept", tags: ["Cosmology", "Concept"] },
      { id: 14, title: "Cosmic Microwave Background", type: "Concept", tags: ["Cosmology", "Concept"] },
      { id: 15, title: "Exoplanet", type: "Astronomical Object", tags: ["Space", "Astronomical Object"] }
    ];

    const nodes = new vis.DataSet([]);
    const edges = new vis.DataSet([]);
    const nodeConnections = {};

    const groups = {
      Scientist: {
        color: { background: '#7B68EE', border: '#4B0082' }
      },
      Book: {
        color: { background: '#8A2BE2', border: '#6A5ACD' }
      },
      AstronomicalObject: {
        color: { background: '#FFD700', border: '#FF8C00' }
      },
      Concept: {
        color: { background: '#32CD32', border: '#228B22' }
      }
    };

    items.forEach(item => {
      const itemNode = {
        id: item.id,
        label: item.title,
        title: `<h3>${item.title}</h3><ul>${item.tags.map(tag => `<li>${tag}</li>`).join('')}</ul>`,
        group: item.type, 
        size: item.tags.length * 6, 
        font: { color: '#ffffff' }
      };
      nodes.add(itemNode);

      item.tags.forEach(tag => {
        const tagNode = nodes.get(tag);
        if (!tagNode) {
          nodes.add({ 
            id: tag, 
            label: tag, 
            group: "Concept", 
            font: { color: '#ffffff' }
          });
        }
        edges.add({ 
          from: item.id, 
          to: tag,
          color: { color: '#666666', highlight: '#999999' }
        });

        nodeConnections[tag] = (nodeConnections[tag] || 0) + 1;
        nodeConnections[item.id] = (nodeConnections[item.id] || 0) + 1;
      });
    });

    nodes.forEach(node => {
      const connectionCount = nodeConnections[node.id] || 0;
      node.size = Math.max(10, connectionCount * 3);
      nodes.update(node);
    });

    const container = document.getElementById("connections-graph");
    const data = { nodes: nodes, edges: edges };

    const options = {
      nodes: {
        shape: 'dot',
        font: { size: 14 },
        scaling: {
          min: 10,
          max: 25
        }
      },
      edges: {
        width: 1,
        smooth: {
          type: 'continuous'
        }
      },
      physics: {
        enabled: false,
        solver: 'forceAtlas2Based',
        forceAtlas2Based: {
          gravitationalConstant: -50,
          centralGravity: 0.01,
          springLength: 200,
          springConstant: 0.05
        }
      }
    };

    const network = new vis.Network(container, data, options);

    const toggleButton = document.querySelector(".toggle-physics-button");
    toggleButton.addEventListener("click", function () {
      const currentPhysics = network.getOptions().physics.enabled;
      network.setOptions({ physics: { enabled: !currentPhysics } });
    });
  });
</script>

</body>
</html>
